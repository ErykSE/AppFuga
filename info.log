2024-08-19 16:25:31,220 - INFO - Attempting to update pv_panel: {'id': 1, 'name': 'PV Panel 1', 'priority': 1, 'max_output': 100, 'min_output': 10, 'actual_output': 0, 'switch_status': False, 'device_status': 'offline'}
2024-08-19 16:25:31,220 - INFO - Successfully created pv_panel instance: PV Panel 1
2024-08-19 16:25:31,221 - INFO - Added pv_panel: PV Panel 1 (Status: offline)
2024-08-19 16:25:31,221 - INFO - Attempting to update pv_panel: {'id': 2, 'name': 'PV Panel 2', 'priority': 1, 'max_output': 120, 'min_output': 15, 'actual_output': 100, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,221 - INFO - Successfully created pv_panel instance: PV Panel 2
2024-08-19 16:25:31,222 - INFO - Added pv_panel: PV Panel 2 (Status: online)
2024-08-19 16:25:31,222 - INFO - Attempting to update wind_turbine: {'id': 3, 'name': 'Wind Turbine 1', 'priority': 2, 'max_output': 200, 'min_output': 20, 'actual_output': 40, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,223 - INFO - Successfully created wind_turbine instance: Wind Turbine 1
2024-08-19 16:25:31,223 - INFO - Added wind_turbine: Wind Turbine 1 (Status: online)
2024-08-19 16:25:31,223 - INFO - Attempting to update wind_turbine: {'id': 4, 'name': 'Wind Turbine 2', 'priority': 2, 'max_output': 180, 'min_output': 20, 'actual_output': 0, 'switch_status': False, 'device_status': 'offline'}
2024-08-19 16:25:31,223 - INFO - Successfully created wind_turbine instance: Wind Turbine 2
2024-08-19 16:25:31,224 - INFO - Added wind_turbine: Wind Turbine 2 (Status: offline)
2024-08-19 16:25:31,224 - INFO - Attempting to update fuel_turbine: {'id': 5, 'name': 'Fuel Turbine 1', 'priority': 4, 'max_output': 300, 'min_output': 30, 'actual_output': 40, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,224 - INFO - Successfully created fuel_turbine instance: Fuel Turbine 1
2024-08-19 16:25:31,224 - INFO - Added fuel_turbine: Fuel Turbine 1 (Status: online)
2024-08-19 16:25:31,224 - INFO - Attempting to update fuel_cell: {'id': 6, 'name': 'Fuel Cell 1', 'priority': 3, 'max_output': 150, 'min_output': 15, 'actual_output': 25, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,224 - INFO - Successfully created fuel_cell instance: Fuel Cell 1
2024-08-19 16:25:31,224 - INFO - Added fuel_cell: Fuel Cell 1 (Status: online)
2024-08-19 16:25:31,225 - INFO - Attempting to update bess: {'id': 7, 'name': 'BESS 1', 'capacity': 350, 'charge_level': 200, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,225 - INFO - Successfully created bess instance: BESS 1
2024-08-19 16:25:31,225 - INFO - New BESS added: BESS 1
2024-08-19 16:25:31,226 - INFO - Added power meter: Meter for PV Panel 1 for device ID: 1
2024-08-19 16:25:31,226 - INFO - Loaded power meter: Meter for PV Panel 1, Status: online, Reading: 15 kW, Device ID: 1
2024-08-19 16:25:31,226 - INFO - Added power meter: Meter for PV Panel 2 for device ID: 2
2024-08-19 16:25:31,226 - INFO - Loaded power meter: Meter for PV Panel 2, Status: online, Reading: 98 kW, Device ID: 2
2024-08-19 16:25:31,227 - INFO - Added power meter: Meter for Wind Turbine 1 for device ID: 3
2024-08-19 16:25:31,227 - INFO - Loaded power meter: Meter for Wind Turbine 1, Status: online, Reading: 42 kW, Device ID: 3
2024-08-19 16:25:31,227 - INFO - Added power meter: Meter for Fuel Turbine 1 for device ID: 5
2024-08-19 16:25:31,227 - INFO - Loaded power meter: Meter for Fuel Turbine 1, Status: online, Reading: 38 kW, Device ID: 5
2024-08-19 16:25:31,227 - INFO - Data loaded successfully.
2024-08-19 16:25:31,234 - INFO - Energy management started
2024-08-19 16:25:31,234 - INFO - Loaded operation mode: semi-automatic
2024-08-19 16:25:31,235 - INFO - Attempting to update pv_panel: {'id': 1, 'name': 'PV Panel 1', 'priority': 1, 'max_output': 100, 'min_output': 10, 'actual_output': 0, 'switch_status': False, 'device_status': 'offline'}
2024-08-19 16:25:31,235 - INFO - Pv_panel PV Panel 1 updated successfully.
2024-08-19 16:25:31,235 - INFO - Attempting to update pv_panel: {'id': 2, 'name': 'PV Panel 2', 'priority': 1, 'max_output': 120, 'min_output': 15, 'actual_output': 100, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,236 - INFO - Pv_panel PV Panel 2 updated successfully.
2024-08-19 16:25:31,236 - INFO - Attempting to update wind_turbine: {'id': 3, 'name': 'Wind Turbine 1', 'priority': 2, 'max_output': 200, 'min_output': 20, 'actual_output': 40, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,236 - INFO - Wind_turbine Wind Turbine 1 updated successfully.
2024-08-19 16:25:31,236 - INFO - Attempting to update wind_turbine: {'id': 4, 'name': 'Wind Turbine 2', 'priority': 2, 'max_output': 180, 'min_output': 20, 'actual_output': 0, 'switch_status': False, 'device_status': 'offline'}
2024-08-19 16:25:31,236 - INFO - Wind_turbine Wind Turbine 2 updated successfully.
2024-08-19 16:25:31,237 - INFO - Attempting to update fuel_turbine: {'id': 5, 'name': 'Fuel Turbine 1', 'priority': 4, 'max_output': 300, 'min_output': 30, 'actual_output': 40, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,237 - INFO - Fuel_turbine Fuel Turbine 1 updated successfully.
2024-08-19 16:25:31,237 - INFO - Attempting to update fuel_cell: {'id': 6, 'name': 'Fuel Cell 1', 'priority': 3, 'max_output': 150, 'min_output': 15, 'actual_output': 25, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,237 - INFO - Fuel_cell Fuel Cell 1 updated successfully.
2024-08-19 16:25:31,237 - INFO - Attempting to update bess: {'id': 7, 'name': 'BESS 1', 'capacity': 350, 'charge_level': 200, 'switch_status': True, 'device_status': 'online'}
2024-08-19 16:25:31,237 - INFO - BESS BESS 1 updated successfully.
2024-08-19 16:25:31,238 - INFO - Added power meter: Meter for PV Panel 1 for device ID: 1
2024-08-19 16:25:31,238 - INFO - Loaded power meter: Meter for PV Panel 1, Status: online, Reading: 15 kW, Device ID: 1
2024-08-19 16:25:31,238 - INFO - Added power meter: Meter for PV Panel 2 for device ID: 2
2024-08-19 16:25:31,238 - INFO - Loaded power meter: Meter for PV Panel 2, Status: online, Reading: 98 kW, Device ID: 2
2024-08-19 16:25:31,239 - INFO - Added power meter: Meter for Wind Turbine 1 for device ID: 3
2024-08-19 16:25:31,239 - INFO - Loaded power meter: Meter for Wind Turbine 1, Status: online, Reading: 42 kW, Device ID: 3
2024-08-19 16:25:31,239 - INFO - Added power meter: Meter for Fuel Turbine 1 for device ID: 5
2024-08-19 16:25:31,239 - INFO - Loaded power meter: Meter for Fuel Turbine 1, Status: online, Reading: 38 kW, Device ID: 5
2024-08-19 16:25:31,240 - INFO - Data loaded successfully.
2024-08-19 16:25:31,244 - INFO - Loaded initial data
2024-08-19 16:25:31,245 - INFO - Starting a new iteration in semi-automatic mode
2024-08-19 16:25:31,245 - INFO - Starting device update based on meter readings
2024-08-19 16:25:31,245 - INFO - Checking 6 devices for updates based on meter readings
2024-08-19 16:25:31,246 - INFO - Checking device PV Panel 1 (ID: 1). Device status: offline, Meter status: online, Meter reading: 15 kW
2024-08-19 16:25:31,246 - WARNING - Updated PV Panel 1 status to online and set actual output to 15 kW based on meter reading. Please check the device communication.
2024-08-19 16:25:31,246 - INFO - Checking device PV Panel 2 (ID: 2). Device status: online, Meter status: online, Meter reading: 98 kW
2024-08-19 16:25:31,246 - INFO - Checking device Wind Turbine 1 (ID: 3). Device status: online, Meter status: online, Meter reading: 42 kW
2024-08-19 16:25:31,246 - INFO - No meter found for device Wind Turbine 2 (ID: 4)
2024-08-19 16:25:31,247 - INFO - Checking device Fuel Turbine 1 (ID: 5). Device status: online, Meter status: online, Meter reading: 38 kW
2024-08-19 16:25:31,247 - INFO - No meter found for device Fuel Cell 1 (ID: 6)
2024-08-19 16:25:31,247 - INFO - Updated 1 devices based on meter readings
2024-08-19 16:25:31,247 - INFO - Updated device: PV Panel 1 (ID: 1), New status: online, New output: 15 kW
2024-08-19 16:25:31,248 - INFO - System status summary:
2024-08-19 16:25:31,248 - INFO - Total generated power: 220 kW
2024-08-19 16:25:31,248 - INFO - Total demand: 109 kW
2024-08-19 16:25:31,248 - INFO - Number of active generating devices: 5
2024-08-19 16:25:31,249 - INFO - Number of inactive generating devices: 1
2024-08-19 16:25:31,249 - INFO - Active generating devices:
2024-08-19 16:25:31,249 - INFO -   - PV Panel 1: 15 kW / 100 kW
2024-08-19 16:25:31,249 - INFO -   - PV Panel 2: 100 kW / 120 kW
2024-08-19 16:25:31,250 - INFO -   - Wind Turbine 1: 40 kW / 200 kW
2024-08-19 16:25:31,250 - INFO -   - Fuel Turbine 1: 40 kW / 300 kW
2024-08-19 16:25:31,250 - INFO -   - Fuel Cell 1: 25 kW / 150 kW
2024-08-19 16:25:31,250 - INFO - Inactive generating devices:
2024-08-19 16:25:31,251 - INFO -   - Wind Turbine 2: max output 180 kW
2024-08-19 16:25:31,251 - INFO - BESS charge level: 200 kWh / 350 kWh
2024-08-19 16:25:31,251 - INFO - Energy purchase: Available (Limit: 300 kWh, Current: 150 kWh)
2024-08-19 16:25:31,251 - INFO - Energy sale: Available (Limit: 200 kWh, Current: 50 kWh)
2024-08-19 16:25:31,252 - INFO - BESS charge level before actions: 200.00 kWh
2024-08-19 16:25:31,252 - INFO - Total generated power: 220 kW
2024-08-19 16:25:31,252 - INFO - Total demand power: 109 kW
2024-08-19 16:25:31,252 - INFO - Power surplus detected: 111 kW - starting surplus management
2024-08-19 16:25:31,252 - INFO - Managing surplus in semi-automatic mode: 111 kW
2024-08-19 16:25:31,253 - INFO - ##################Current tabu list: {}
2024-08-19 16:25:31,253 - INFO - Checking tabu list before proposing actions
2024-08-19 16:25:31,253 - INFO - BESS id: 7
2024-08-19 16:25:31,253 - INFO - #######Checking if 7 is in tabu list: {}
2024-08-19 16:25:31,254 - INFO - BESS in tabu: False
2024-08-19 16:25:31,254 - INFO - #######Checking if 7 is in tabu list: {}
2024-08-19 16:25:31,254 - INFO - #######Checking if OSD is in tabu list: {}
2024-08-19 16:25:31,255 - INFO - BESS available: True, Export possible: True
2024-08-19 16:25:31,255 - INFO - BESS charge level: 200 / 350 kWh
2024-08-19 16:25:31,255 - INFO - OSD remaining sale capacity: 150 kWh
2024-08-19 16:25:31,255 - INFO - Selected action: SurplusAction.BOTH
2024-08-19 16:25:31,256 - INFO - Batteryxxx (0.2) price (0.1 kW)
2024-08-19 16:25:31,256 - INFO - Charging priority: battery factor (0.20) > price factor (0.10)
2024-08-19 16:25:31,256 - INFO - #######Checking if 7 is in tabu list: {}
2024-08-19 16:25:31,256 - INFO - Generated 1 possible actions, 1 after tabu list filter
2024-08-19 16:25:31,257 - INFO - Saved 1 pending actions
2024-08-19 16:25:31,257 - INFO - Pending action: {
  "id": "d99c2ce9-2aa5-41ce-9a3a-d0586339d073",
  "device_id": 7,
  "device_name": "BESS 1",
  "device_type": "BESS",
  "action": "charge:111",
  "current_output": 200,
  "proposed_output": 311,
  "reduction": 111
}
2024-08-19 16:25:31,258 - INFO - Successfully verified pending actions file. Content: [
  {
    "id": "d99c2ce9-2aa5-41ce-9a3a-d0586339d073",
    "device_id": 7,
    "device_name": "BESS 1",
    "device_type": "BESS",
    "action": "charge:111",
    "current_output": 200,
    "proposed_output": 311,
    "reduction": 111
  }
]
2024-08-19 16:25:31,258 - INFO - Generated operator decisions:
2024-08-19 16:25:31,258 - INFO - Decision: {
  "approved": false,
  "action_id": "d99c2ce9-2aa5-41ce-9a3a-d0586339d073"
}
2024-08-19 16:25:31,259 - INFO - Saved 1 operator decisions
2024-08-19 16:25:31,260 - INFO - Operator decision: {
  "approved": false,
  "action_id": "d99c2ce9-2aa5-41ce-9a3a-d0586339d073"
}
2024-08-19 16:25:31,260 - INFO - Successfully verified operator decisions file. Content: [
  {
    "approved": false,
    "action_id": "d99c2ce9-2aa5-41ce-9a3a-d0586339d073"
  }
]
2024-08-19 16:25:31,260 - INFO - Action rejected: {
  "id": "d99c2ce9-2aa5-41ce-9a3a-d0586339d073",
  "device_id": 7,
  "device_name": "BESS 1",
  "device_type": "BESS",
  "action": "charge:111",
  "current_output": 200,
  "proposed_output": 311,
  "reduction": 111
}
2024-08-19 16:25:31,260 - INFO - #######Added device 7 to tabu list. Current list: {'7': 1724077566.2609477}
2024-08-19 16:25:31,261 - INFO - Cleared pending actions file
2024-08-19 16:25:31,261 - INFO - Successfully verified cleared pending actions file. Content: []
2024-08-19 16:25:31,262 - INFO - Cleared operator decisions file
2024-08-19 16:25:31,262 - INFO - Successfully verified cleared operator decisions file. Content: []
2024-08-19 16:25:31,262 - INFO - Surplus management completed. Approved actions: 0, Initial surplus: 111 kW, Remaining surplus: 111 kW, Current tabu list size: 1
2024-08-19 16:25:31,263 - INFO - System status summary:
2024-08-19 16:25:31,263 - INFO - Total generated power: 220 kW
2024-08-19 16:25:31,263 - INFO - Total demand: 109 kW
2024-08-19 16:25:31,263 - INFO - Number of active generating devices: 5
2024-08-19 16:25:31,263 - INFO - Number of inactive generating devices: 1
2024-08-19 16:25:31,264 - INFO - Active generating devices:
2024-08-19 16:25:31,264 - INFO -   - PV Panel 1: 15 kW / 100 kW
2024-08-19 16:25:31,264 - INFO -   - PV Panel 2: 100 kW / 120 kW
2024-08-19 16:25:31,264 - INFO -   - Wind Turbine 1: 40 kW / 200 kW
2024-08-19 16:25:31,264 - INFO -   - Fuel Turbine 1: 40 kW / 300 kW
2024-08-19 16:25:31,264 - INFO -   - Fuel Cell 1: 25 kW / 150 kW
2024-08-19 16:25:31,264 - INFO - Inactive generating devices:
2024-08-19 16:25:31,264 - INFO -   - Wind Turbine 2: max output 180 kW
2024-08-19 16:25:31,265 - INFO - BESS charge level: 200 kWh / 350 kWh
2024-08-19 16:25:31,265 - INFO - Energy purchase: Available (Limit: 300 kWh, Current: 150 kWh)
2024-08-19 16:25:31,265 - INFO - Energy sale: Available (Limit: 200 kWh, Current: 50 kWh)
2024-08-19 16:25:31,266 - INFO - Live data saved to live_data.json
2024-08-19 16:25:31,266 - INFO - Live contract data saved to live_contract_data.json
2024-08-19 16:25:31,400 - INFO - Iteration completed in 0.15 seconds
2024-08-19 16:25:31,400 - INFO - BESS charge level after actions: 200.00 kWh
2024-08-19 16:25:31,401 - INFO - Waiting 15 seconds for next iteration
2024-08-19 16:25:43,618 - INFO - Energy management stopping
2024-08-19 16:25:43,618 - INFO - Energy management stopped
